services:
  gateway:
    restart: always
    container_name: gateway
    image: hummingbot/gateway:PR543
    # build: # Uncomment this build section and comment image to build Hummingbot locally
    #   context: .
    #   dockerfile: Dockerfile
    ports:
      - "15888:15888"
    volumes:
      - ./conf:/home/gateway/conf
      - ./logs:/home/gateway/logs
      - ./certs:/home/gateway/certs
    environment:
      - GATEWAY_PASSPHRASE=${GATEWAY_PASSPHRASE:-a} # Use env var or default
      - DEV=false # Production mode with HTTPS
    networks:
      - gateway-network

  gateway-app:
    restart: always
    container_name: gateway-app
    build:
      context: ./gateway-app
      dockerfile: Dockerfile # Production Dockerfile with nginx
    ports:
      - "3000:80" # Production port
    environment:
      - VITE_GATEWAY_URL=http://localhost:15888 # Gateway backend URL (accessible from host browser)
    depends_on:
      - gateway
    networks:
      - gateway-network

networks:
  gateway-network:
    driver: bridge
